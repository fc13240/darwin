<div class="editor-row"><div class="section"><h5>数据来源</h5><div class="editor-option"><label class="small">数据来源</label><select ng-init="panel.dstype = panel.dstype || 'search'" class="input-small" ng-change="ds_change(panel.dstype)" ng-model="panel.dstype"><option value="analytics">分析</option><option value="hbase">Hbase</option><option value="search" selected="selected">搜索</option></select></div></div><div class="editor-option" ng-show="panel.dstype !== 'search'"><div class="section"><h5>表名</h5><div class="editor-option"><label class="small">表名</label><select ng-init="panel.tablename = current_tablename" ng-change="current_option_change(panel.tablename);set_refresh(true)" class="input-small" ng-model="panel.tablename" ng-options="s.name for s in list"></select></div></div><div class="section"><h5>字段名</h5><div class="editor-option"><label class="small">字段名</label><select ng-init="panel.tablenamefields = current_tablenamefields" ng-change="set_refresh(true)" class="input-small" ng-model="panel.tablenamefields" ng-options="sh.name for sh in panel.tablename.fields"></select></div></div></div><div class="section"><h5>统计参数设置</h5><div style="display:none" class="editor-option"><label class="small">分词模式</label><select class="input-medium" ng-model="panel.tmode" ng-options="f for f in ['terms','terms_stats']" ng-change="set_refresh(true)"></select></div><div class="editor-option" ng-show="panel.tmode == 'terms_stats'"><label class="small">统计类型</label><select class="input-medium" ng-model="panel.tstat"><option ng-selected="panel.tstat==='count'" value="count">记录行数</option><option ng-selected="panel.tstat==='total_count'" value="total_count">total_count</option><option ng-selected="panel.tstat==='min'" value="min">选定数值字段的最小值</option><option ng-selected="panel.tstat==='max'" value="max">选定数值字段的最大值</option><option ng-selected="panel.tstat==='total'" value="total">选定数值字段的总和</option><option ng-selected="panel.tstat==='mean'" value="mean">选定数值字段的平均值</option></select></div><div class="editor-option"><label class="small">分组字段(对字段值会分词统计)</label><input type="text" class="input-small" bs-typeahead="fields.list" ng-model="panel.field" ng-change="set_refresh(true)"></div><div class="editor-option" ng-show="panel.tmode == 'terms_stats'"><label class="small">值字段</label><input type="text" class="input-small" bs-typeahead="fields.list" ng-model="panel.valuefield" ng-change="set_refresh(true)"></div><div class="editor-option"><label class="small">保留最大分组数</label><input class="input-small" type="number" ng-model="panel.size" ng-change="set_refresh(true)"></div><div class="editor-option"><label class="small">排序</label><select class="input-medium" ng-init="panel.order=panel.order||'count'" ng-model="panel.order" ng-change="set_refresh(true)" ng-show="panel.tmode == 'terms'"><option ng-selected="panel.order==='count'" value="count">最大出现次数</option><option ng-selected="panel.order==='term'" value="term">词字母顺序</option><option ng-selected="panel.order==='reverse_count'" value="reverse_count">最小出现次数</option><option ng-selected="panel.order==='reverse_term'" value="reverse_term">词字母逆序</option></select><select class="input-medium" ng-model="panel.order" ng-options="f for f in ['term', 'reverse_term', 'count', 'reverse_count', 'total', 'reverse_total', 'min', 'reverse_min', 'max', 'reverse_max', 'mean', 'reverse_mean']" ng-change="set_refresh(true)" ng-show="panel.tmode == 'terms_stats'"></select></div><div class="editor-option" ng-show="panel.tmode == 'terms'"><label class="small">排除的词 (多个以逗号分隔)</label><input array-join="" type="text" ng-model="panel.exclude"></div></div></div><div class="editor-row"><div class="section"><h5>图表选项</h5><div class="editor-option"><label class="small">样式</label><select class="input-small" ng-init="panel.chart=panel.chart||'bar'" ng-model="panel.chart"><option ng-selected="panel.chart==='bar'" value="bar">柱状图</option><option ng-selected="panel.chart==='pie'" value="pie">饼状图</option><option ng-selected="panel.chart==='table'" value="table">列表</option></select></div><div class="editor-option" ng-show="panel.chart == 'table'"><label class="small">字体大小</label><select class="input-mini" ng-model="panel.style['font-size']" ng-options="f for f in ['7pt','8pt','9pt','10pt','12pt','14pt','16pt','18pt','20pt','24pt','28pt','32pt','36pt','42pt','48pt','52pt','60pt','72pt']"></select></div><div class="editor-option" ng-show="panel.chart == 'bar' || panel.chart == 'pie'"><label class="small">图例</label><select class="input-small" ng-init="panel.counter_pos=panel.counter_pos||'above'" ng-model="panel.counter_pos"><option ng-selected="panel.counter_pos==='above'" value="above">图形上方</option><option ng-selected="panel.counter_pos==='below'" value="below">图形下方</option><option ng-selected="panel.counter_pos==='none'" value="none">无图例</option></select></div><div class="editor-option" ng-show="panel.chart != 'table' && panel.counter_pos != 'none'"><label class="small">图例摆放形式</label><select class="input-small" ng-init="panel.arrangement=panel.arrangement||'horizontal'" ng-model="panel.arrangement"><option ng-selected="panel.arrangement==='horizontal'" value="horizontal">横向排列(可折行)</option><option ng-selected="panel.arrangement==='vertical'" value="vertical">列表排列(每行一个图例)</option></select></div><div class="editor-option"><label class="small">不匹配的值</label><input type="checkbox" ng-model="panel.missing" ng-checked="panel.missing"></div><div class="editor-option"><label class="small">其他汇总</label><input type="checkbox" ng-model="panel.other" ng-checked="panel.other"></div><div class="editor-option" ng-show="panel.chart == 'pie'"><label class="small">圈饼</label><input type="checkbox" ng-model="panel.donut" ng-checked="panel.donut"></div><div class="editor-option" ng-show="panel.chart == 'pie'"><label class="small">倾斜</label><input type="checkbox" ng-model="panel.tilt" ng-checked="panel.tilt"></div><div class="editor-option" ng-show="panel.chart == 'pie'"><label class="small">标签</label><input type="checkbox" ng-model="panel.labels" ng-checked="panel.labels"></div></div></div>